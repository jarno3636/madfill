// pages/.well-known/farcaster.json.js
export default function handler(req, res) {
  // Adjust this if you use a different deployment URL
  const origin =
    process.env.NEXT_PUBLIC_SITE_URL ||
    (req.headers['x-forwarded-host']
      ? `https://${req.headers['x-forwarded-host']}`
      : `https://${req.headers.host}`)

  const manifest = {
    name: "MadFill",
    icon: `${origin}/og/cover.PNG`,       // ‚Üê your icon in /public/og/cover.PNG
    description: "Fill the blank. Make it funny. Win the pot.",
    homeUrl: `${origin}/free`,

    // Fill these AFTER you sign your accountAssociation per Farcaster docs
    accountAssociation: {
      header: "eip191",
      payload: "<paste-signed-payload>",
      signature: "<0x_signature>",
    },

    // Optional (later): "webhookUrl": `${origin}/api/farcaster-webhook`
  }

  res.setHeader('Content-Type', 'application/json')
  res.setHeader('Cache-Control', 'public, max-age=300, s-maxage=3600')
  res.status(200).json(manifest)
}
